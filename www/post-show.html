<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="favicon.ico">
    <title>SamePinch</title>
    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom styles for this template -->
    <link href="css/style.css" rel="stylesheet">
    <link href="css/jasny-bootstrap.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Ubuntu:300,400' rel='stylesheet' type='text/css'>
    <link href='http://fortawesome.github.io/Font-Awesome/assets/font-awesome/css/font-awesome.css' rel='stylesheet' type='text/css'>
</head>
<body class="bg-white">

<div id="viewPost">
    <nav class="navbar navbar-inverse navbar-fixed-top navbar-sp">
        <div class="container">
            <div class="row">
                <div class="col-md-3 col-xs-3">
                    <a href="index.html"> <span class="glyphicon glyphicon-menu-left back"></span> </a>
                </div>
                <div class="col-md-6 col-xs-6 heading"><img src="img/header-icon-samepinch.png" class="img-responsive" width="47" height="28" alt=""/></div>
                <div class="col-md-3 col-xs-3 nopadding-left"> </div>
            </div>
        </div>
    </nav>
    <div class="container">
        <!-- Example row of columns -->
        <div class="row">
            <div class="col-md-12" id="post">
                <!-- Dynamic content goes here -->
            </div>
        </div>
    </div>

    <!-- /.container -->
    <div style="width:100%; height:60px; background-color:#ffffff; position:fixed; bottom:0px;">
        <div class="container-fluid nopadding">
            <form action="#" method="post" id="comment-form">
                <input type="hidden" name="post_id" value="">
                <input type="hidden" name="anonymous" value="true">
                <div class="col-md-12  input-comment row-padding">
                    <div class="col-xs-7 col-md-9 nopadding-right">
                        <input type="text" class="input-box" placeholder="Add a Comment" name="text">
                    </div>
                    <div class="col-xs-5 col-md-3 nopadding-left">
                        <div class="btn-group dropup pull-right">
                            <button type="button" class="btn btn-default" id="btn-send-comment">Comment as</button>
                            <button id="switch-comment-as" type="button" class="btn btn-default dropdown-toggle profile-pic-addpost" data-toggle="dropdown" aria-expanded="false">
                                <div class="profilepic-placeholder">
                                    <img src="img/ananymous-placeholder.png" alt="" id="comment-as-picture"> <span class="caret"></span>
                                </div>
                                <span class="sr-only">Toggle Dropdown</span>
                            </button>
                            <ul class="dropdown-menu dropdown-menu-right" role="menu">
                                <span class="glyphicon glyphicon-triangle-bottom caret-dropdown"></span>
                                <li class="comment-as-user"></li>
                                <li class="comment-as-ananymous"></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<script id="single-post-template" type="text/x-handlebars-template">
    <div id="toppanel" class="row mtop5 pbottom5 border-bottom">
        <div class="col-md-5 col-xs-4">
            {{#if anonymous}}
            <div class="profilepic-img pull-left"><img src="{{ ../../anonymous_image }}"  alt=""/></div>
            {{else}}
            {{#if owner.photo }}
            <div class="profilepic-img pull-left"><img src="{{ owner.photo }}"  alt=""/></div>
            {{ else }}
            <div class="profilepic-placeholder pull-left">{{firstChar owner.fname}}{{firstChar owner.lname}}</div>
            {{/if}}
            {{/if}}
            <div class="profile-name pull-left">
                {{#if anonymous}}
                anonymous
                {{ else }}
                {{ owner.fname }}
                {{/if}}
            </div>
        </div>
        <div class="col-md-7 col-xs-8">
            <div class="pull-right mtop5 icon-counts">
                <img src="img/icon-view-count.png" width="26" height="15" alt="">
                <span class="mright5">{{ views }}</span>
                <img src="img/icon-upvote-gray.png" width="21" height="21" alt="">
                <span class="mright5">{{ upvote_count }}</span>
                <img src="img/time.png" width="20" height="20" alt=""> <span class="mright5 time-style">TD</span> </div>
        </div>
    </div>
    <div class="clearfix"></div>
    <div id="postContent" class="col-md-12 nopadding">
        <!--<p>But when the voting members of FIFA cast their ballots on Friday, it most likely will be as if nothing had happened this week. Sepp Blatter, the publicly embattled leader seeking a fifth term as FIFAâ€™s president, shows no signs of political damage. Despite a new round of allegations of widespread bribery implicating some of his top lieutenants, 11 of whom have been provisionally suspended from soccer, Mr. Blatter is expected to handily defeat his only challenger.</p>
        <img src="img/1.png" width="295" height="150" alt=""/>
        <p>But when the voting members of FIFA cast their ballots on Friday, it most likely will be as if nothing had happened this week. Sepp Blatter damage.</p>-->
        <p>{{ content }}</p>
        <div class="clearfix"></div>
        <div class="col-md-12 border-bottom row-padding">
            <div class="row">
                <div class="col-md-10 col-xs-8">
                    {{#each tags}}
                    <div class="tag">#politics</div>
                    {{/each}}
                </div>
                <!-- flag/like sesction -->
                <div class="pull-right col-md-2 col-xs-4">
                    <div class="pull-right">
                        <a href="#"><img src="img/viewpost-flag.png" width="32" height="32" alt="" onmouseover="this.src='img/viewpost-flag-active.png' " onmouseout="this.src='img/viewpost-flag.png'" /></a>
                        <a href="#"> <img src="img/viewpost-like.png" width="32" height="32" alt="" onmouseover="this.src='img/viewpost-like-active.png' " onmouseout="this.src='img/viewpost-like.png'"/> </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="clearfix"></div>
    <div id="comments">
        <ul >
            {{#comments }}
            <li id="comment-{{ uid }}" data-id="{{ uid }}">
                <div class="row">
                    <div class="col-md-1 col-xs-1 col-sm-1">
                        <img src="{{ commenter.photo }}" class="comment-profile" alt=""/>
                    </div>
                    <div class="col-md-10 col-xs-6 col-sm-9 pull-left mleft">
                        <div>{{ commenter.fname }} {{ commenter.lname }}</div>
                        <div class="time">TD</div>
                    </div>
                    <div class="col-md-1 col-xs-3 col-sm-2 nopadding-left pull-right">
                        <span class="light-color"> <img src="img/icon-upvote-gray.png" width="18" height="18" alt=""/> {{ upvote_count }} </span>
               <span class="pull-right">
                  <span data-toggle="dropdown" aria-expanded="false" class="glyphicon comment-more glyphicon-option-vertical"></span>
                  <ul class="dropdown-menu dropdown-menu-right" role="menu">
                      <span class="glyphicon glyphicon-triangle-top caret-dropdown"></span>
                      <li><a href="#">Like </a></li>
                      <li><a href="#">Flag </a></li>
                  </ul>
               </span>
                    </div>
                </div>
            </li>
            {{/comments}}
        </ul>
    </div>
</script>

<script id="single-comment-template" type="text/x-handlebars-template">
    <li id="comment-{{ uid }}" data-id="{{ uid }}">
        <div class="row">
            <div class="col-md-1 col-xs-1 col-sm-1">
                <img src="{{ commenter.photo }}" class="comment-profile" alt=""/>
            </div>
            <div class="col-md-10 col-xs-6 col-sm-9 pull-left mleft">
                <div>{{ commenter.fname }} {{ commenter.lname }}</div>
                <div class="time">{{ createdAt }}</div>
            </div>
            <div class="col-md-1 col-xs-3 col-sm-2 nopadding-left pull-right">
                <span class="light-color"> <img src="img/icon-upvote-gray.png" width="18" height="18" alt=""/> {{ upvote_count }} </span>
            <span class="pull-right">
                <span data-toggle="dropdown" aria-expanded="false" class="glyphicon comment-more glyphicon-option-vertical"></span>
                <ul class="dropdown-menu dropdown-menu-right" role="menu">
                    <span class="glyphicon glyphicon-triangle-top caret-dropdown"></span>
                    <li><a href="#">Like </a></li>
                    <li><a href="#">Flag </a></li>
                </ul>
            </span>
            </div>
        </div>
    </li>
</script>

<script type="text/javascript" src="cordova.js"></script>
<script type="text/javascript" src="js/index.js"></script>
<script type="text/javascript" src="js/jquery-2.1.4.min.js"></script>
<script type="text/javascript" src="js/jquery.serialize-hash.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<script type="text/javascript" src="js/jasny-bootstrap.js"></script>
<script type="text/javascript" src="js/bootbox.min.js"></script>
<script type="text/javascript" src="js/handlebars-v3.0.3.js"></script>
<script type="text/javascript" src="js/handlebars-helpers.js"></script>
<script type="text/javascript" src="js/fastclick.js"></script>
<script type="text/javascript" src="js/spin.min.js"></script>
<script type="text/javascript" src="js/api_calls.js"></script><!--must before application.js  -->
<script type="text/javascript" src="js/application.js"></script>
<script type="text/javascript" src="js/authentication.js"></script>
<script type="text/javascript" src="js/posts.js"></script>


<script type="text/javascript">
    singlePostReady()
    // set comment as user
    if(localStorage['current_user']){
       current_user = JSON.parse(localStorage.getItem('current_user'))
       str = "<a href='#'>Comment as "+ current_user.fname +"<img src='"+ current_user.photo +"' width='30' height='30' alt=''> </a>"
        $('.comment-as-user').html(str)
        $('.comment-as-ananymous').html('')
    }

    $('.comment-as-user').on('click',function(e){
        $('#comment-as-picture').attr('src',current_user.photo)
         str = "<a href='#'>Comment as anonymous <img width='30' height='30' alt='' src='img/ananymous-placeholder.png'> </a>"
         $('.comment-as-ananymous').html(str)
         $(this).html('')
        $('#comment-form').find('input[name="anonymous"]').val(true);

    })

    $('.comment-as-ananymous').on('click',function(e){
        $('#comment-as-picture').attr('src','img/ananymous-placeholder.png')
        current_user = JSON.parse(localStorage.getItem('current_user'))
        str = "<a href='#'>Comment as "+ current_user.fname +"<img src='"+ current_user.photo +"' width='30' height='30' alt=''> </a>"
        $('.comment-as-user').html(str)
        $(this).html('')
        $('#comment-form').find('input[name="anonymous"]').val(true);
    })


    // redirect to signin if current user present and clicks on comment as or navigation
    $('#switch-comment-as').on('click',function(e){
        if(!localStorage['current_user']){
            window.location.href = 'signin.html'
        }
    })

</script>

</body>
</html>